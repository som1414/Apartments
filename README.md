# Исследование объявлений о продаже квартир

В вашем распоряжении данные сервиса Яндекс.Недвижимость — архив объявлений о продаже квартир в Санкт-Петербурге и соседних населённых пунктов за несколько лет. Нужно научиться определять рыночную стоимость объектов недвижимости. Ваша задача — установить параметры. Это позволит построить автоматизированную систему: она отследит аномалии и мошенническую деятельность. 

По каждой квартире на продажу доступны два вида данных. Первые вписаны пользователем, вторые — получены автоматически на основе картографических данных. Например, расстояние до центра, аэропорта, ближайшего парка и водоёма. 

# Содержание

- 1  Откройте файл с данными и изучите общую информацию.
- 2  Предобработка данных
    - 2.1  Столбец total_images
    - 2.2  Столбец last_price
    - 2.3  Столбец total_area
    - 2.4  Столбец first_day_exposition
    - 2.5  Столбец rooms
    - 2.6  Столбец ceiling_height
    - 2.7  Столбец floors_total
    - 2.8  Столбец living_area и studio
    - 2.9  Столбец floor
    - 2.10  Столбец is_apartment
    - 2.11  Столбец open_plan
    - 2.12  Столбец kitchen_area
    - 2.13  Столбец balcony
    - 2.14  Столбец locality_name
    - 2.15  Столбец airports_nearest
    - 2.16  Столбец city_centers_nearest
    - 2.17  Столбец parks_around3000
    - 2.18  Столбец parks_nearest
    - 2.19  Столбец ponds_around3000
    - 2.20  Столбец ponds_nearest
    - 2.21  Столбец days_exposition
    - 2.22  Поиск и удаление дубликатов
    - 2.23  Изменение типов данных
- 3  Посчитайте и добавьте в таблицу новые столбцы
    - 3.1  Цена одного квадратного метра
    - 3.2  День недели публикации объявления | Месяц публикации объявления | Год публикации объявления
    - 3.3  Тип этажа квартиры
    - 3.4  Расстояние до центра города в километрах
- 4  Проведите исследовательский анализ данных
    - 4.1  Изучаем параметры объектов
    - 4.2  Изучаем, как быстро продавались квартиры
    - 4.3  Факторы больше всего влияющие на общую (полную) стоимость объекта
    - 4.4  Средняя цена одного квадратного метра.
    - 4.5  Средняя цена километра в Санкт-Петербурге
- 5  Общий вывод


# Описание данных

`airports_nearest` — расстояние до ближайшего аэропорта в метрах (м)  
`balcony` — число балконов  
`ceiling_height` — высота потолков (м)  
`cityCenters_nearest` — расстояние до центра города (м)  
`days_exposition` — сколько дней было размещено объявление (от публикации до снятия)  
`first_day_exposition` — дата публикации  
`floor` — этаж  
`floors_total` — всего этажей в доме  
`is_apartment` — апартаменты (булев тип)  
`kitchen_area` — площадь кухни в квадратных метрах (м²)  
`last_price` — цена на момент снятия с публикации  
`living_area` — жилая площадь в квадратных метрах (м²)  
`locality_name` — название населённого пункта  
`open_plan` — свободная планировка (булев тип)  
`parks_around3000` — число парков в радиусе 3 км  
`parks_nearest` — расстояние до ближайшего парка (м)  
`ponds_around3000` — число водоёмов в радиусе 3 км  
`ponds_nearest` — расстояние до ближайшего водоёма (м)  
`rooms` — число комнат  
`studio` — квартира-студия (булев тип)  
`total_area` — общая площадь квартиры в квадратных метрах (м²)  
`total_images` — число фотографий квартиры в объявлении

# Общий вывод

Для анализа была дана база с информацией по продаже квартир. Состоял из 22 колонок и 23699 строк. 
В процессе предобработки было удалено 17 строк (осталось 23682 строк).

Обработка данных:
- в стлобце `ceiling_height` пропуски заменены медианами. И здесь были обнаружены ошибочные значения, в которых небыло запятой - исправили;
- столбец `first_day_exposition` приведен к типу datetime64;
- в столбцах `living_area` и `kitchen_area` произведена замена медианами в зависимости от общей площади. Так же учтены квартиры студии - в строках для студии в столбце`kitchen_area` постевлено 0;
- в числовых столбцах заменены типы на int, кроме столбцов с площадями и расстояниями(округлено до 0,1);
- в столбце `days_exposition` пропуски заполненны медианами в зависимости от населенного пункта;
- обрезаны сильные выбросы в столбцах где они имели место;
- удалено 3 дубликата;

По заданию было добавлено 7 столбцов, в которых были подсчитаны дополнительные параметры:
- цена квадратного метра;
- день недели, месяц и год публикации объявления;
- тип этажа квартиры (значения — «первый», «последний», «другой»);
- соотношение жилой и общей площади, а также отношение площади кухни к общей.

Был проведен анализ и сделаны выводы:

Больше всего квартир с площадями 30-60 кв.м - это самые популярные 1 и 2-х комнатные. Следом идут 3 комнатные с площадью до 80 кв.м. Типичное расположение этих квартир с 1 по 10 этаж.
Так же можно заметить, что по мере роста площади квартир, их количество начинает убывать - обратная зависимость. Также квартиры меньше 30 кв.м тоже довольно редки.
Распределение более похоже на распределение Пуассона.
Видна чёткая зависимость жилой и кухонной площадей от общей. С ростом площади уменьшается количество квартир.
Наиболее популярна жилая площадь от 15 до 40 метров, кухня от 7 до 10 квадратных метра.
На графике с жилой площадью заметен провал в районе 25 кв.м., скорее всего, это связано с переходом от однокомнатных квартир к двухкомнатным (первый всплеск - количество 1 + 2 комнатных квартир, второй - только 2 комнатные). Проще говоря, однокомнатных квартир с жилой площадью 25 кв.м. мало, а двухкомнатных с такой площадью еще нет или их количество равнозначно мало.
Больше всего квартир с высотой потолков 2.5 - 3 м из них подавляющее большинство с высотой 2,6 - 2,7 см. Остальное - нестандартный размер и чем выше - тем реже встречается. Ниже нормального диапазона - тоже большая редкость. Похоже на распределение Пуассона

Видно, что больше всего квартир продается в пяти и девятиэтажных домах, скорее всего это самые распространенные дома советской постройки в старых районах города. 

Заметно, что наибольше количество квартир продаются по цене в диапазоне 2 - 7 млн.руб. Основная масса продается в цене около 4 мнн. А в остальных случаях чем ниже или выше цена количество объявлений пропорционально падает. Распределение более похоже на распределение Пуассона.

Логично, что больше всего квартир продается  на промежуточных этажах, так как дома в основном многоэтажные.

Чаще всего объявления публикуются в буднии дни, скорее всего это связано с графиком работы риелторов.

Больше всего объявлений опубликовано в декабре, возможно это связано с желанием продать квартиру перед началом календарного года, чтобы потом не платить налог.
Так же много объявлений подается в весенние месяцы, в этот период как правило спрос тоже увеличивается.

На графикав видно, что больше всего квартир продается на расстоянии от 12 до 15км.
Растояния до аэропорта приобладает в промежутке 15 - 40 км.
Растояние до парка от нескольких метров до 750.


Наблюдается слабая зависимость количества объявлений от растояния до парка. При этом обратная картина для расстояния до центра или аэропорта (чем больше расстояние, тем меньше объявлений).
На графиках видно, что больше всего квартир продается (примерно) за 45 и 60 дней (пиковые значения на первой и второй гистограммах).


Факторы больше всего влияющие на стоимость квартиры: 

Больше всего на стоимость квартиры влияет её площадь(прямопропорцианальная зависимость). Среднее влияние оказывает жилая площадь и площадь кухни. Количество комнат и тип этажа вляют меньше всего. Дата размещения не оказывает влияния на цену. Стоит обратить внимание на тип этажа, есть существенная разница между первым и последним этажами

По гистограмме видно, что наибольшая цена на расстоянии до 1 км от центра (около 32 млн.р за квартиру) и сильно меняется уже после 1 км. от центра (17 млн.р за квартиру)
Еще одна граница находится в районе 7 км от центра, после которой следует сильное падение цены (с 15 млн до 9 млн) и после начинает убывать плавно.
#%% md

**Чек-лист готовности проекта**

Поставьте 'x' в выполненных пунктах. Далее нажмите Shift+Enter.
#%% md
- [x]  открыт файл
- [x]  файлы изучены (выведены первые строки, метод `info()`)
- [x]  определены пропущенные значения
- [x]  заполнены пропущенные значения
- [x]  есть пояснение, какие пропущенные значения обнаружены
- [x]  изменены типы данных
- [x]  есть пояснение, в каких столбцах изменены типы и почему
- [x]  посчитано и добавлено в таблицу: цена квадратного метра
- [x]  посчитано и добавлено в таблицу: день недели, месяц и год публикации объявления
- [x]  посчитано и добавлено в таблицу: этаж квартиры; варианты — первый, последний, другой
- [x]  посчитано и добавлено в таблицу: соотношение жилой и общей площади, а также отношение площади кухни к общей
- [x]  изучены следующие параметры: площадь, цена, число комнат, высота потолков
- [x]  построены гистограммы для каждого параметра
- [x]  выполнено задание: «Изучите время продажи квартиры. Постройте гистограмму. Посчитайте среднее и медиану. Опишите, сколько обычно занимает продажа. Когда можно считать, что продажи прошли очень быстро, а когда необычно долго?»
- [x]  выполнено задание: «Уберите редкие и выбивающиеся значения. Опишите, какие особенности обнаружили».
- [x]  выполнено задание: «Какие факторы больше всего влияют на стоимость квартиры? Изучите, зависит ли цена от квадратного метра, числа комнат, этажа (первого или последнего), удалённости от центра. Также изучите зависимость от даты размещения: дня недели, месяца и года».
- [x]  выполнено задание: «Выберите 10 населённых пунктов с наибольшим числом объявлений. Посчитайте среднюю цену квадратного метра в этих населённых пунктах. Выделите населённые пункты с самой высокой и низкой стоимостью жилья. Эти данные можно найти по имени в столбце `locality_name`».
- [x]  выполнено задание: «Изучите предложения квартир: для каждой квартиры есть информация о расстоянии до центра. Выделите квартиры в Санкт-Петербурге (`locality_name`). Ваша задача — выяснить, какая область входит в центр. Создайте столбец с расстоянием до центра в километрах: округлите до целых значений. После этого посчитайте среднюю цену для каждого километра. Постройте график: он должен показывать, как цена зависит от удалённости от центра. Определите границу, где график сильно меняется — это и будет центральная зона».
- [x]  выполнено задание: «Выделите сегмент квартир в центре. Проанализируйте эту территорию и изучите следующие параметры: площадь, цена, число комнат, высота потолков. Также выделите факторы, которые влияют на стоимость квартиры (число комнат, этаж, удалённость от центра, дата размещения объявления). Сделайте выводы. Отличаются ли они от общих выводов по всей базе?»
- [x]  в каждом этапе есть выводы
- [x]  есть общий выводй дорогой квартирой стоимостью 17 122 148 и площадью 178.3.
